<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Rails Counter_cache Frustrations - Ramblings on Rails</title>
  <meta name="author" content="Gary Traffanstedt">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://traffan.com/rails-counter-cache-frustrations/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Ramblings on Rails" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://traffan.com/rails-counter-cache-frustrations/">
  <meta property="og:title" content="Rails Counter_cache Frustrations - Ramblings on Rails">
  

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  

</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Ramblings on Rails</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="Ramblings on Rails" />
    
    <meta itemprop="url" content="http://traffan.com" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2013-04-23T09:04:16-04:00"  data-updated="true" itemprop="datePublished dateCreated">Tue 23 Apr 2013</time>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        Rails Counter_cache Frustrations
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><p>For my bucket list site I need to know how many goals each user has and of those, how many are completed. Doing this with eager loading is easy but less than optimal. After watching the RailsCast on the subject (<a href="http://railscasts.com/episodes/23-counter-cache-column">#23 Counter Cache Column - RailsCasts</a>), I was intrigued. This seemed like the ideal way to efficiently solve my problem.</p>

<p>I quickly set things up and for total goals, it worked perfect. Create a new goal and the counter would increment. Delete a goal and the counter would decrement. Get the count for goals for a particular user and it would only hit the user table. Nice, clean, efficient. Great, I was half way home. Went to do the same thing for the second column, the counter for completed goals and ran into a problem. You apparently can’t have more than one counter cache column like this.</p>

<p>Normally you set up the counter cache column with the name and then <code>_count</code> so <code>goals_count</code> would be the name if you were getting the count for goals. I thought <code>goals_count</code> and <code>goals_completed_count</code> would be ideal but no dice.</p>

<p>After a bit of research I found a gem that does exactly what I want. I’m still in the process of implementing this gem but expect a future blog post on how to use this gem in the next few days.</p>
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">Gary Traffanstedt</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2013-04-23T09:04:16-04:00"  data-updated="true" itemprop="datePublished dateCreated">Tue 23 Apr 2013</time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/rails/'>rails</a>
  
</span>


        </p>
        
          <div class="sharing">
  
  
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/auto-tweet-octopress-blog-posts-using-ifttt/" title="Previous Post: Auto-Tweet Octopress Blog Posts Using IFTTT">&laquo; Auto-Tweet Octopress Blog Posts Using IFTTT</a></li>
            
            
            <li class="next"><a href="/counter-caching/" title="Next Post: Counter Caching">Counter Caching &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/bug-in-apples-command-line-tools-6-dot-3/">Bug in Apple&#8217;s Command Line Tools 6.3</a>
    
    <a class="list-group-item " href="/the-return-of-the-great-white-hope/">The Return of the Great White Hope.</a>
    
    <a class="list-group-item " href="/haml-is-not-for-assets/">HAML Is Not for ASSETS</a>
    
    <a class="list-group-item " href="/counter-caching/">Counter Caching</a>
    
    <a class="list-group-item active" href="/rails-counter-cache-frustrations/">Rails Counter_cache Frustrations</a>
    
  </div>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Categories</h3>
  </div>
  <div class="list-group">
    
    
    <a class="list-group-item " href="/categories/delayed_job/index.html">
      <span class="badge">1</span>
      delayed_job
    </a>
    
    
    <a class="list-group-item " href="/categories/development/index.html">
      <span class="badge">13</span>
      development
    </a>
    
    
    <a class="list-group-item " href="/categories/rails/index.html">
      <span class="badge">7</span>
      rails
    </a>
    
    
    <a class="list-group-item " href="/categories/ruby/index.html">
      <span class="badge">1</span>
      ruby
    </a>
    
    
    <a class="list-group-item " href="/categories/apple/index.html">
      <span class="badge">2</span>
      apple
    </a>
    
    
    <a class="list-group-item " href="/categories/shiny/index.html">
      <span class="badge">1</span>
      shiny
    </a>
    
    
    <a class="list-group-item " href="/categories/toys/index.html">
      <span class="badge">1</span>
      toys
    </a>
    
    
    <a class="list-group-item " href="/categories/brew/index.html">
      <span class="badge">1</span>
      brew
    </a>
    
    
    <a class="list-group-item " href="/categories/mac/index.html">
      <span class="badge">1</span>
      mac
    </a>
    
    
    <a class="list-group-item " href="/categories/mysql/index.html">
      <span class="badge">1</span>
      mysql
    </a>
    
    
    <a class="list-group-item " href="/categories/postgresql/index.html">
      <span class="badge">2</span>
      postgresql
    </a>
    
    
    <a class="list-group-item " href="/categories/path/index.html">
      <span class="badge">1</span>
      path
    </a>
    
    
    <a class="list-group-item " href="/categories/puma/index.html">
      <span class="badge">1</span>
      puma
    </a>
    
    
    <a class="list-group-item " href="/categories/appfog/index.html">
      <span class="badge">1</span>
      appfog
    </a>
    
    
    <a class="list-group-item " href="/categories/coffeescript/index.html">
      <span class="badge">1</span>
      coffeescript
    </a>
    
    
    <a class="list-group-item " href="/categories/jquery/index.html">
      <span class="badge">1</span>
      jquery
    </a>
    
    
    <a class="list-group-item " href="/categories/features/index.html">
      <span class="badge">1</span>
      features
    </a>
    
    
    <a class="list-group-item " href="/categories/gems/index.html">
      <span class="badge">2</span>
      gems
    </a>
    
    
    <a class="list-group-item " href="/categories/blogging/index.html">
      <span class="badge">2</span>
      blogging
    </a>
    
  </div>
</section>
<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating&#8230;</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/blimey85">@blimey85</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'blimey85',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - Gary Traffanstedt<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    








<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
