<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title alt="Octopress Tapir - Ramblings on Rails">
    Octopress Tapir - Ramblings on Rails
  </title>
  <meta name="author" content="Gary Traffanstedt">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://traffan.com/octopress-tapir/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Ramblings on Rails" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://traffan.com/octopress-tapir/">
  <meta property="og:title" content="Octopress Tapir - Ramblings on Rails">
  

  

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  



</head>

<body   >
  <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
  <div id="wrap">
    <header id="body_header">
  <nav class="navbar navbar-default" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Ramblings on Rails</a>
      </div>

      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active">
          <a rel="index" href="/">Blog</a>
          </li>
          <li >
          <a href="/archives">Archives</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
              <span class="visible-xs">RSS</span>
              <img class="hidden-xs" src="/images/rss.png" alt="RSS">
            </a>
          </li>
          
          
            <li>
  <form class="search navbar-form navbar-right" action="/search" method="get">
    <div class="form-group">
      <input class="form-control" type="text" id="search-query" name="q" placeholder="Search" autocomplete="off">
    </div>
  </form>
</li>
          

          
        </ul>
      </div>
    </div>
  </nav>


</header>


    <div id="main" role="main" class="container">

      <section class="panel panel-default clearfix" id="search-results" style="display: none;">
        <div class="panel-heading">
          <h3 class="panel-title">Search results</h3>
        </div>
        <div class="entries">
        </div>
      </section>


      <div id="content">
        <div class="row">
  <div class="page-content col-md-8" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="Ramblings on Rails"/>
    
    <meta itemprop="url" content="http://traffan.com"/>
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <h2 class="entry-title" itemprop="name headline">
          <a>Octopress Tapir
          
      </h2>
    
    <hr>
    
      <div class="post_meta">
        <ul>
          <li class="time">












<span class="glyphicon glyphicon-calendar"></span>&nbsp;&nbsp;<time datetime="2013-04-21T06:17:11-04:00"  data-updated="true" itemprop="datePublished dateCreated">Sun 21 Apr 2013</time></li>
          <li class="categories">


<span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;
<span class="categories">
  
    <a class='category' href='/categories/blogging/'>blogging</a>
  
</span>


</li>
          <li class="tags">



    <span class="glyphicon glyphicon-tags"></span>&nbsp;&nbsp;
    <span class="tags">
      
        <a class='tag' href='/tags/octopress/'>octopress</a>, <a class='tag' href='/tags/search/'>search</a>, <a class='tag' href='/tags/tapir/'>tapir</a>
      
    </span>


</li>
        </ul>
      </div>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><p>For those running Octopress and wanting to set up a full-text search of their site, something a little nicer than the stock Google Simple Search, Tapir is a valid option. It&rsquo;s a third party website that indexes your RSS feed and provides search tools against that data-set.<!-- more --></p>

<p><strong>Note:</strong> You can find the relevant files on GitHub here: <a href="https://github.com/blimey85/octopress-tapir">octopress-tapir</a></p>

<p><a href="http://tapirgo.com/">Tapir</a> search for your <a href="http://octopress.org/">Octopress</a> blog!</p>

<p>Tapir works by indexing your RSS feed. Only what is included within this file will be indexed. For RSS purposes you most likely only want the last 20 or so articles but for search, you want all of them included. To handle this, we simply create a second xml file to use for search.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>atom.xml</span></code></pre></td></tr></table></div></figure>


<ul>
<li>the original file</li>
<li>limited to 20 most recent posts</li>
<li>we use this for RSS</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>atom_search.xml</span></code></pre></td></tr></table></div></figure>


<ul>
<li>the new file</li>
<li>a modified version of atom.xml</li>
<li>includes all posts</li>
<li>added summary field</li>
</ul>


<p><strong>Install</strong></p>

<ol>
<li>Visit <a href="http://tapirgo.com/">Tapirgo.com</a> and enter the url to your <code>atom_search.xml</code> like: <code>http://yoursite.com/atom_search.xml</code>
After you enter your email and click the big <code>GO</code> button, you’ll be given both a public and a private token.</li>
<li>Open your <code>_config.yml</code> and include the public token: <code>tapir_token: your_id_here</code></li>
<li>Copy <code>loading.gif</code> to your <code>source/images/</code> folder.</li>
<li>Copy <code>jquery-tapir.js</code> to your <code>source/javascripts/</code> folder.</li>
<li>Copy <code>search.html</code> to your <code>source/</code> folder.</li>
<li>Open <code>source/_includes/navigation.html</code> and add:</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% if site.tapir_token %}
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span> <span class="na">action=</span><span class="s">&quot;/search.html&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;fieldset</span> <span class="na">role=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;search&quot;</span> <span class="na">name=</span><span class="s">&quot;query&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Search...&quot;</span> <span class="na">x-webkit-speech</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/fieldset&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'>{% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>That’s all there is to it. You should now be able to search your content using the wonderful <a href="http://tapirgo.com/">Tapir</a> service. :)</p>
</div>


      <footer>
        
          <div class="sharing">
  
  
  
</div>

        
        
          <ul class="meta text-muted pager">
            
              <li class="previous"><a href="/gem-consistency-fail/" title="Previous: Gem: Consistency_fail">&larr;&nbsp;Previous</a></li>
            

            
              <li class="next"><a href="/auto-tweet-octopress-blog-posts-using-ifttt/" title="Next: Auto-Tweet Octopress Blog Posts Using IFTTT">Next&nbsp;&rarr;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
  </div>
  
    <aside class="sidebar col-md-4">
      
        <section class="panel panel-default clearfix">
  <div class="panel-heading">
    <h3 class="panel-title">About Gary Traffanstedt</h3>
  </div>
  <p class="profile">
    <img class="profile" src="https://pbs.twimg.com/profile_images/513531246316904448/uv-jL6ND.jpeg">
    I am Gary Traffanstedt, a former and apsiring web programmer. On this site you can find my ramblings about Ruby on
    Rails, Javascript, and other things I find interesting on my adventure to hone my skills and re-enter the world of
    code poetry.
  </p>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/bug-in-apples-command-line-tools-6-dot-3/">Bug in Apple&#8217;s Command Line Tools 6.3</a>
    
    <a class="list-group-item " href="/the-return-of-the-great-white-hope/">The Return of the Great White Hope.</a>
    
    <a class="list-group-item " href="/haml-is-not-for-assets/">HAML Is Not for ASSETS</a>
    
    <a class="list-group-item " href="/counter-caching/">Counter Caching</a>
    
    <a class="list-group-item " href="/rails-counter-cache-frustrations/">Rails Counter_cache Frustrations</a>
    
  </div>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Categories</h3>
  </div>
  <div class="list-group">
    
    
    <a class="list-group-item " href="/categories/development/index.html">
      <span class="badge">14</span>
      development
    </a>
    
    
    <a class="list-group-item " href="/categories/hardware/index.html">
      <span class="badge">1</span>
      hardware
    </a>
    
    
    <a class="list-group-item " href="/categories/blogging/index.html">
      <span class="badge">3</span>
      blogging
    </a>
    
  </div>
</section><section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Tag Cloud</h3>
  </div>
  <div class="list-group">
    <div id="myCanvasContainer" style="text-align: center;">
      <canvas width="300" height="300" id="myCanvas">
        <p>Anything in here will be replaced on browsers that support the canvas element</p>
      </canvas>
    </div>
    <div id="tags" style="display: none;">
      <ul>
        
        <li>
          <a href="/tags/delayed_job" style="font-size: 4pt">
            delayed_job
          </a>
        </li>
        
        <li>
          <a href="/tags/rails" style="font-size: 34pt">
            rails
          </a>
        </li>
        
        <li>
          <a href="/tags/ruby" style="font-size: 4pt">
            ruby
          </a>
        </li>
        
        <li>
          <a href="/tags/apple" style="font-size: 8pt">
            apple
          </a>
        </li>
        
        <li>
          <a href="/tags/shiny" style="font-size: 4pt">
            shiny
          </a>
        </li>
        
        <li>
          <a href="/tags/toys" style="font-size: 4pt">
            toys
          </a>
        </li>
        
        <li>
          <a href="/tags/brew" style="font-size: 4pt">
            brew
          </a>
        </li>
        
        <li>
          <a href="/tags/mac" style="font-size: 4pt">
            mac
          </a>
        </li>
        
        <li>
          <a href="/tags/mysql" style="font-size: 4pt">
            mysql
          </a>
        </li>
        
        <li>
          <a href="/tags/postgresql" style="font-size: 8pt">
            postgresql
          </a>
        </li>
        
        <li>
          <a href="/tags/path" style="font-size: 4pt">
            path
          </a>
        </li>
        
        <li>
          <a href="/tags/puma" style="font-size: 4pt">
            puma
          </a>
        </li>
        
        <li>
          <a href="/tags/appfog" style="font-size: 4pt">
            appfog
          </a>
        </li>
        
        <li>
          <a href="/tags/coffeeScript" style="font-size: 4pt">
            coffeeScript
          </a>
        </li>
        
        <li>
          <a href="/tags/jquery" style="font-size: 4pt">
            jquery
          </a>
        </li>
        
        <li>
          <a href="/tags/features" style="font-size: 4pt">
            features
          </a>
        </li>
        
        <li>
          <a href="/tags/gems" style="font-size: 13pt">
            gems
          </a>
        </li>
        
        <li>
          <a href="/tags/octopress" style="font-size: 8pt">
            octopress
          </a>
        </li>
        
        <li>
          <a href="/tags/search" style="font-size: 4pt">
            search
          </a>
        </li>
        
        <li>
          <a href="/tags/tapir" style="font-size: 4pt">
            tapir
          </a>
        </li>
        
        <li>
          <a href="/tags/automation" style="font-size: 4pt">
            automation
          </a>
        </li>
        
        <li>
          <a href="/tags/twitter" style="font-size: 4pt">
            twitter
          </a>
        </li>
        
        <li>
          <a href="/tags/haml" style="font-size: 4pt">
            haml
          </a>
        </li>
        
      </ul>
    </div>
  </div>
</section>
<section class="panel panel-default clearfix">
  <div class="panel-heading">
    <h3 class="panel-title">
      <a class="customisable-highlight" href="https://twitter.com/blimey85" title="Tweets from Twitter API">Tweets</a>
      <a class="follow-button profile" href="https://twitter.com/blimey85" role="button" data-scribe="component:followbutton" title="Follow Twitter API on Twitter"><span class="glyphicon glyphicon-bird"></span>Follow @blimey85</a>
    </h3>
  </div>
  <a class="twitter-timeline" height="450px" width="100%" data-chrome="noheader nofooter noborders noscrollbar" data-dnt="true" href="https://twitter.com/blimey85" data-widget-id="595102305114005504">Tweets by @blimey85</a>
  <script>
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

  </script>
</section>


<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating&#8230;</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/blimey85">@blimey85</a> on GitHub
    </div>
  
</section>


      
    </aside>
  
</div>

      </div>
    </div>
  </div>
  <footer role="contentinfo"><div class="container">
    <span class="social-icons">
  <a class="fa-twitter-cont" href="https://twitter.com/blimey85"><i class="fa fa-1_6x fa-twitter"></i></a>
  <a class="fa-facebook-cont"href="https://www.facebook.com/blimey85"><i class="fa fa-1_6x fa-facebook"></i></a>
  <a class="fa-skype-cont"href="skype:blimey85?call"><i class="fa fa-1_6x fa-skype"></i></a>
  <a class="fa-pinterest-cont"href="https://www.pinterest.com/blimey85/"><i class="fa fa-1_6x fa-pinterest"></i></a>
  <a class="fa-instagram-cont"href="https://instagram.com/blimey85/"><i class="fa fa-1_6x fa-instagram"></i></a>
  <a class="fa-dribbble-cont"href="https://dribbble.com/blimey85"><i class="fa fa-1_6x fa-dribbble"></i></a>
  <a class="fa-github-cont"href="https://github.com/blimey85"><i class="fa fa-1_6x fa-github"></i></a>
  <a class="fa-spotify-cont"href="https://spotify.com/blimey85"><i class="fa fa-1_6x fa-spotify"></i></a>
  <a class="fa-rss-cont"href="/atom.xml"><i class="fa fa-1_6x fa-rss"></i></a>
</span>

<p class="text-muted credits">
  Copyright &copy; 2013-2015 &middot; Gary Traffanstedt<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
  








<script src="/js/search.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/javascripts/jquery.tagcanvas.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>
<script type="text/javascript">
  var hideTwitterAttempts = 0;
  function hideTwitterBoxElements() {
    setTimeout( function() {
      if ( $('[id*=twitter]').length ) {
        $('[id*=twitter]').each( function(){
          var ibody = $(this).contents().find( 'body' );

          if (ibody.find('.timeline .stream .h-feed li.tweet').length) {
            ibody.find('li.h-entry.tweet.customisable-border').css('border-bottom', '1px solid #ddd');
          } else {
            $(this).hide();
          }
        });
      }
      hideTwitterAttempts++;
      if ( hideTwitterAttempts < 3 ) {
        hideTwitterBoxElements();
      }
    }, 500);
  }

  // lunr search
  $(function () {
    $('#search-query').lunrSearch({
      indexUrl: '/js/index.json',   // Url for the .json file containing search index data
      results: '#search-results',  // selector for containing search results element
      entries: '.entries',         // selector for search entries containing element (contained within results above)
      template: '#search-results-template'  // selector for Mustache.js template
    });
  });

  $(document).ready(function () {
    // Twitter - add borders between tweets
    hideTwitterBoxElements();

    // Tag Cloud
    if (!$('#myCanvas').tagcanvas({
          textColour: '#157ab5',
          outlineMethod: 'none',
          reverse: true,
          depth: 0.8,
          weight: true,
          weightSizeMin: 10,
          weightSizeMax: 40,
          wheelZoom: false,
          maxSpeed: 0.03
        }, 'tags')) {
      // something went wrong, hide the canvas container
      $('#myCanvasContainer').hide();
    }

    // github repos
    if (!window.jXHR) {
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }
    github.showRepos({
      user: 'blimey85',
      count: 0,
      skip_forks: true,
      target: '#gh_repos'
    });

    (function () {

      // This function does the dirty work of finding the event type and setting the appropriate title
      var updatePageTitle = function ( evt ) {
        var v = $(document).find('title').attr('alt'), // The title when tab is visible
            h = "Miss You :(", // The title when tab is hidden
            evtMap = {
              focus: v,
              focusin: v,
              pageshow: v,
              blur: h,
              focusout: h,
              pagehide: h
            }; // Map each title to the different events

        evt = evt || window.event;

        // If the event type exists in the map, set the right title
        if ( evt.type in evtMap ) {
          document.title = evtMap[ evt.type ];
        } else {
          // Last ditch attempt
          if ( document.hidden ) {
            document.title = h;
          } else {
            document.title = v;
          }
        }
      };

      // This sets the appropriate listeners so that everything works cross browser
      var hidden = "hidden";

      // Standards:
      if ( hidden in document )
        document.addEventListener( "visibilitychange", updatePageTitle );
      else if ( ( hidden = "mozHidden" ) in document )
        document.addEventListener( "mozvisibilitychange", updatePageTitle );
      else if ( ( hidden = "webkitHidden" ) in document )
        document.addEventListener( "webkitvisibilitychange", updatePageTitle );
      else if ( ( hidden = "msHidden" ) in document )
        document.addEventListener( "msvisibilitychange", updatePageTitle );
      // IE 9 and lower:
      else if ( "onfocusin" in document )
        document.onfocusin = document.onfocusout = updatePageTitle;
      // All others:
      else
        window.onpageshow = window.onpagehide = window.onfocus = window.onblur = updatePageTitle;

    })();
  });

  (function($) {

    /**
     * Copyright 2012, Digital Fusion
     * Licensed under the MIT license.
     * http://teamdf.com/jquery-plugins/license/
     *
     * @author Sam Sehnert
     * @desc A small plugin that checks whether elements are within
     *     the user visible viewport of a web browser.
     *     only accounts for vertical position, not horizontal.
     */

    $.fn.visible = function(partial) {

      var $t            = $(this),
          $w            = $(window),
          viewTop       = $w.scrollTop(),
          viewBottom    = viewTop + $w.height(),
          _top          = $t.offset().top,
          _bottom       = _top + $t.height(),
          compareTop    = partial === true ? _bottom : _top,
          compareBottom = partial === true ? _top : _bottom;

      return ((compareBottom <= viewBottom) && (compareTop >= viewTop));

    };

  })(jQuery);

  var win = $(window);

  var allMods = $(".slide-in");

  allMods.each(function(i, el) {
    var el = $(el);
    if (el.visible(true)) {
      el.addClass("already-visible");
    }
  });

  win.scroll(function(event) {

    allMods.each(function(i, el) {
      var el = $(el);
      if (el.visible(true)) {
        el.addClass("come-in");
      }
    });

  });
</script>

<script src="/javascripts/github.js" type="text/javascript"></script>
<script src="/javascripts/twitter.js" type="text/javascript"> </script>


<script id="search-results-template" type="text/mustache">
  {{#entries}}
    <article>
      <h3>
        {{#date}}<small><time datetime="{{pubdate}}" pubdate>{{displaydate}}</time></small>{{/date}}
        <a href="{{url}}">{{title}}</a>
      </h3>
    </article>
  {{/entries}}
</script>


</body>
</html>
